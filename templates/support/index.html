{% extends "base.html" %}
{% block page_title %}Support Â· Eduvos Parent Portal{% endblock %}
{% block content %}
<div class="vstack">
  <div class="section-title">Support & Helpdesk</div>

  {% if submitted %}
  <div class="card" style="border-left: 4px solid var(--brand);">
    <div class="hstack gap-3">
      <div style="font-size: 1.5rem;">âœ…</div>
      <div>
        <div style="font-weight: 600;">Ticket Submitted Successfully</div>
        <div class="muted">We have received your request and will get back to you shortly.</div>
      </div>
    </div>
  </div>
  {% else %}

  <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
    <!-- Contact Form -->
    <div class="card">
      <h3 style="margin-top:0; font-size: 1.1rem; margin-bottom: 1.5rem;">Create New Ticket</h3>
      <form method="post" class="vstack">
        {% csrf_token %}

        <div class="form-group">
          <label class="form-label">Category</label>
          <select name="category" class="select" required>
            <option value="" disabled selected>Select a category...</option>
            <option>Academic Inquiry</option>
            <option>Financial / Billing</option>
            <option>Technical Issue</option>
            <option>General Support</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Subject</label>
          <input type="text" name="subject" placeholder="Brief summary of issue" required class="input">
        </div>

        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea name="body" placeholder="Please describe your issue in detail..." required
            class="textarea"></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Related Student ID (Optional)</label>
          <input type="text" name="student_id" placeholder="e.g. 12345" class="input">
        </div>

        <div class="mt-2">
          <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Ticket</button>
        </div>
      </form>
    </div>

    <!-- Info Sidebar -->
    <div class="vstack">
      <div class="card">
        <h3 style="margin-top:0; font-size: 1.1rem; margin-bottom: 1rem;">Direct Contact</h3>
        <div class="vstack gap-3 text-sm">
          <div>
            <div class="muted">General Enquiries</div>
            <a href="mailto:info@eduvos.com" style="font-weight: 500;">info@eduvos.com</a>
          </div>
          <div>
            <div class="muted">Emergency Support</div>
            <a href="tel:+27123456789" style="font-weight: 500;">+27 12 345 6789</a>
          </div>
          <div class="muted" style="font-size: 0.8rem; margin-top: 0.5rem;">
            Office Hours: Mon - Fri, 08:00 - 16:30
          </div>
        </div>
      </div>

      <div class="card" style="background: linear-gradient(135deg, #eff6ff, #fff);">
        <div class="hstack gap-3">
          <div style="font-size: 1.25rem;">ðŸ’¡</div>
          <div class="text-sm">
            <strong>Tip:</strong> Check the <a href="/documents/">Documents</a> section for policy guides and student
            handbooks before opening a ticket.
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}